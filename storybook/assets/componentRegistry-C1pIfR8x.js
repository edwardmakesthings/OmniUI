const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ThemeAwareText-aBl3ngNK.js","assets/index-CFacQ8Bc.js","assets/_commonjsHelpers-CqkleIqs.js","assets/iframe-BGiDNlN8.js","assets/jsx-runtime-t1Y7DJZC.js"])))=>i.map(i=>d[i]);
import{j as f}from"./jsx-runtime-t1Y7DJZC.js";import{x as I,y as N,L as A,J as ae,Q as V,t as H,v as $,K as F,D as Q,S as we,X as Me,Z as Le,u as $e,N as U,O as He,_ as Oe,$ as xe,a0 as je,n as he,B as Ue,a1 as Fe,a2 as Ge,a3 as Ye,V as de,W as le,a4 as j,R as re,a5 as ee}from"./ThemeAwareText-aBl3ngNK.js";import{_ as Ke}from"./iframe-BGiDNlN8.js";import{I as Te,S as Ie,P as Xe}from"./utils-Dv6imMev.js";import{r as x}from"./index-CFacQ8Bc.js";import{D as Qe}from"./Dropdown-DNZchKtb.js";import"./DropdownSelect-BUSKISJM.js";import{I as Je}from"./Input-BphtCn-1.js";import{I as ve}from"./IconButton-CmKgifoD.js";import{s as Ze,p as et}from"./panel-C3E1geOT.js";import{P as tt}from"./PushButton-Ceh3LIjb.js";const M={base:I("relative w-full h-full","z-50"),fullscreen:I("fixed inset-0")},L={base:I("absolute inset-0 bg-black/50","transition-opacity duration-300"),fullscreen:I("fixed inset-0")},K=I(N.flex.col.base,A.solid.dark,ae.transform),X=I("flex-1 overflow-auto"),nt={name:"drawer",elements:["container","overlay","content"],variants:{left:{root:I(K,"fixed top-0 left-0 bottom-0","border-r border-accent-dark-neutral",V.default),container:I(M.base,M.fullscreen),overlay:I(L.base,L.fullscreen),content:X},"left-contained":{root:I(K,"absolute top-0 left-0 bottom-0","border-r border-accent-dark-neutral",V.default),container:M.base,overlay:L.base,content:X},right:{root:I(K,"fixed top-0 right-0 bottom-0","border-l border-accent-dark-neutral",V.default),container:I(M.base,M.fullscreen),overlay:I(L.base,L.fullscreen),content:X},"right-contained":{root:I(K,"absolute top-0 right-0 bottom-0","border-l border-accent-dark-neutral",V.default),container:M.base,overlay:L.base,content:X},top:{root:I(K,"fixed top-0 left-0 right-0","border-b border-accent-dark-neutral",V.default),container:I(M.base,M.fullscreen),overlay:I(L.base,L.fullscreen),content:X},"top-contained":{root:I(K,"absolute top-0 left-0 right-0","border-b border-accent-dark-neutral",V.default),container:M.base,overlay:L.base,content:X},bottom:{root:I(K,"bottom-0 left-0 right-0","border-t border-accent-dark-neutral",V.default),container:I(M.base,M.fullscreen),overlay:I(L.base,L.fullscreen),content:X},"bottom-contained":{root:I(K,"absolute bottom-0 left-0 right-0","border-t border-accent-dark-neutral",V.default),container:M.base,overlay:L.base,content:X}}},rt=({children:a,open:r=!1,onClose:e,variant:t="left",width:n=320,height:s=320,closeOnOverlayClick:o=!0,closeOnEscape:d=!0,showOverlay:c=!0,className:y,containerClassName:v,overlayClassName:l,contentClassName:p,styleProps:u,...m})=>{const[i,b]=x.useState(!1);x.useEffect(()=>{r&&b(!0)},[r]),x.useEffect(()=>{if(!r||!d)return;const T=D=>{D.key==="Escape"&&(e==null||e())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[r,d,e]);const h=x.useCallback(()=>{o&&(e==null||e())},[o,e]),w=()=>{if(r)return"translate(0, 0)";switch(t.split("-")[0]){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)";default:return"translate(0, 0)"}},g=({elementProps:T,state:D,computedStyle:E})=>{const S=(T==null?void 0:T["data-component-id"])||"drawer",C={"aria-hidden":!r};return f.jsxs("div",{className:E.container,onTransitionEnd:()=>!r&&b(!1),...C,children:[c&&f.jsx("div",{className:$(E.overlay,r?"opacity-100":"opacity-0",l),onClick:h,"aria-hidden":"true"}),f.jsx("div",{...T,id:S,role:"dialog","aria-modal":"true",className:E.root,style:{...t.includes("left")||t.includes("right")?{width:n}:{height:s},transform:w()},children:a})]})};return i?f.jsx(H,{as:"div",stylePreset:nt,styleProps:{variant:t,elements:{root:{base:y},container:{base:v},overlay:{base:l},content:{base:p}}},renderElement:g,...m}):null};rt.__docgenInfo={description:"",methods:[],displayName:"Drawer",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},open:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},variant:{required:!1,tsType:{name:"DrawerVariant"},description:"",defaultValue:{value:'"left"',computed:!1}},width:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"320",computed:!1}},height:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"320",computed:!1}},closeOnOverlayClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},closeOnEscape:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showOverlay:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},overlayClassName:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const Ee=I(N.flex.col.base,N.spacing.gap.sm),De=I(N.flex.col.base,N.spacing.pad.sm,ae.colors,F.default.base),Se=I(N.flex.col.base,N.spacing.pad.sm,"overflow-hidden"),at={name:"dropdownPanel",elements:["header","content"],variants:{default:{root:I(Ee,A.solid.dark,Q.accent.all),header:I(De,A.solid.dark,Q.accent.bottom,"hover:bg-accent-dark-neutral/20"),content:Se},ghost:{root:I(Ee,A.solid.transparent),header:I(De,A.solid.transparent,"hover:bg-accent-dark-neutral/20"),content:Se}}},Pe=({value:a,onChange:r,onSearch:e,onClear:t,placeholder:n="Search...",className:s})=>{const[o,d]=x.useState(!1),[c,y]=x.useState(a||""),v=x.useCallback(i=>{y(i),r==null||r(i)},[r]),l=x.useCallback(()=>{y(""),t==null||t()},[t]),p=x.useCallback(()=>{d(i=>!i),o||setTimeout(()=>{var i;(i=document.querySelector(".search-input"))==null||i.focus()},0)},[o]),u=x.useCallback(()=>{e==null||e(c)},[e,c]),m=x.useCallback(i=>{i.key==="Enter"&&u()},[u]);return o?f.jsx("div",{className:"flex flex-col gap-2 w-full",children:f.jsx(Je,{value:c,onChange:v,onKeyDown:m,type:"search",placeholder:n,variant:"search",className:"search-input",prefix:{content:f.jsx(ve,{icon:we,variant:"ghost",onClick:()=>{p(),u()},tooltip:"Search",className:s})},suffix:[{content:f.jsx(Me,{}),action:l,tooltip:"Clear search",isInteractive:!0},{content:f.jsx(Qe,{label:f.jsx(Le,{size:20}),options:[{label:"All",value:"all"},{label:"Components",value:"components"},{label:"Layouts",value:"layouts"}],variant:"ghost",showCaret:!1}),isInteractive:!0}]})}):f.jsx(ve,{icon:we,variant:"ghost",onClick:p,tooltip:"Search",className:s})};Pe.__docgenInfo={description:"",methods:[],displayName:"SearchBar",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSearch:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search..."',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};const oe=({children:a,variant:r="default",maxHeight:e,scrollToTop:t=!1,onScroll:n,className:s,contentClassName:o,styleProps:d,scrollbarStyle:c="dark",scrollbarSize:y="normal",...v})=>{const l=x.useRef(null),p=x.useCallback(()=>{l.current&&t&&(l.current.scrollTop=0)},[t]);t&&p();const u=$("scrollbar-custom",`scrollbar-${c}`,y==="thin"&&"scrollbar-thin"),m=({elementProps:i,state:b,computedStyle:h})=>{const w=(i==null?void 0:i["data-component-id"])||"scrollbox",g=`${w}-content`;return f.jsx("div",{...i,id:w,role:"region",className:h.root,style:{maxHeight:e},children:f.jsx("div",{ref:l,id:g,className:$(h.content,u,o),onScroll:n,style:{maxHeight:e},children:a})})};return f.jsx(H,{as:"div",stylePreset:Ze,styleProps:{variant:r,elements:{root:{base:s},content:{base:o}}},renderElement:m,...v})};oe.__docgenInfo={description:"",methods:[],displayName:"ScrollBox",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},variant:{required:!1,tsType:{name:"ScrollBoxVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},scrollToTop:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.UIEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactUIEvent",raw:"React.UIEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"event"}],return:{name:"void"}}},description:""},scrollbarStyle:{required:!1,tsType:{name:"union",raw:'"dark" | "light" | "accent" | "invisible"',elements:[{name:"literal",value:'"dark"'},{name:"literal",value:'"light"'},{name:"literal",value:'"accent"'},{name:"literal",value:'"invisible"'}]},description:"",defaultValue:{value:'"dark"',computed:!1}},scrollbarSize:{required:!1,tsType:{name:"union",raw:'"normal" | "thin"',elements:[{name:"literal",value:'"normal"'},{name:"literal",value:'"thin"'}]},description:"",defaultValue:{value:'"normal"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const Ve=({header:a,children:r,variant:e="default",showHeader:t=!!a,className:n,headerClassName:s,contentClassName:o,styleProps:d,...c})=>{const y=({elementProps:v,state:l,computedStyle:p})=>{const u=(v==null?void 0:v["data-component-id"])||"panel",m=`${u}-header`,i=`${u}-content`;return f.jsxs("div",{...v,id:u,role:"region","aria-labelledby":t?m:void 0,className:p.root,children:[t&&f.jsx("div",{id:m,className:$(p.header,!a&&"invisible"),children:a}),f.jsx("div",{id:i,className:p.content,children:r})]})};return f.jsx(H,{as:"div",stylePreset:et,styleProps:{variant:e,elements:{root:{base:n},header:{base:s},content:{base:o}}},renderElement:y,...c})};Ve.__docgenInfo={description:"",methods:[],displayName:"Panel",props:{header:{required:!1,tsType:{name:"ReactNode"},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""},variant:{required:!1,tsType:{name:"PanelVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},showHeader:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"!!header",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},headerClassName:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const st=({title:a,children:r,icon:e,description:t,defaultOpen:n=!1,open:s,onOpenChange:o,variant:d="default",searchable:c=!1,contentLayout:y="list",maxHeight:v=0,className:l,headerClassName:p,contentClassName:u,...m})=>{const[i,b]=x.useState(n),[h,w]=x.useState(""),g=s??i,T=x.useCallback(()=>{const S=!g;s===void 0&&b(S),o==null||o(S)},[g,s,o]),D=()=>!c||!h?r:x.Children.map(r,S=>x.isValidElement(S)&&typeof S.props.children=="string"&&S.props.children.toLowerCase().includes(h.toLowerCase())?S:null),E=({elementProps:S,state:C,computedStyle:k})=>{const R={role:"button","aria-expanded":g,"aria-controls":`${S.id}-content`};return f.jsxs("div",{...S,className:k.root,children:[f.jsxs("div",{className:$(k.header,"cursor-pointer"),onClick:T,...R,children:[f.jsxs("div",{className:"flex items-center gap-2",children:[e&&f.jsx(e,{size:16}),f.jsx("span",{className:"flex-grow",children:a}),f.jsx($e,{size:16,className:$("transition-transform duration-200",g&&"rotate-180")})]}),t&&f.jsx("div",{className:"text-sm text-font-dark-muted mt-1",children:t})]}),g&&f.jsxs("div",{id:`${S.id}-content`,className:k.content,children:[c&&f.jsx("div",{className:"mb-2",children:f.jsx(Pe,{value:h,onChange:w,placeholder:"Search..."})}),v!==0?f.jsx(oe,{maxHeight:v,variant:d==="default"?"inset":"ghost",children:f.jsx("div",{className:$(y==="grid"?"grid grid-cols-2 gap-2":"flex flex-col gap-1"),children:D()})}):f.jsx(Ve,{variant:d==="default"?"inset":"ghost",children:f.jsx("div",{className:$(y==="grid"?"grid grid-cols-2 gap-2":"flex flex-col gap-1"),children:D()})})]})]})};return f.jsx(H,{as:"div",stylePreset:at,styleProps:{variant:d,elements:{root:{base:l},header:{base:p},content:{base:u}}},state:{isActive:g},renderElement:E,...m})};st.__docgenInfo={description:"",methods:[],displayName:"DropdownPanel",props:{title:{required:!0,tsType:{name:"ReactNode"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},icon:{required:!1,tsType:{name:"ComponentType",elements:[{name:"IconProps"}],raw:"ComponentType<IconProps>"},description:""},description:{required:!1,tsType:{name:"string"},description:""},defaultOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},variant:{required:!1,tsType:{name:"union",raw:'"default" | "ghost"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"ghost"'}]},description:"",defaultValue:{value:'"default"',computed:!1}},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},contentLayout:{required:!1,tsType:{name:"union",raw:'"grid" | "list"',elements:[{name:"literal",value:'"grid"'},{name:"literal",value:'"list"'}]},description:"",defaultValue:{value:'"list"',computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"0",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},headerClassName:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const ot=x.memo(function({mode:r="contained",cellSize:e=20,color:t="rgba(225,225,225,0.05)",thickness:n=1,visible:s=!0,className:o="",zIndex:d=50}){if(!s)return null;const c={backgroundImage:`
      linear-gradient(to right, ${t} ${n}px, transparent ${n}px),
      linear-gradient(to bottom, ${t} ${n}px, transparent ${n}px)
    `,backgroundSize:`${e}px ${e}px`,zIndex:d},y="pointer-events-none select-none w-full h-full",v=r==="overlay"?"fixed inset-0":"absolute inset-0";return f.jsx("div",{className:`${y} ${v} ${o}`.trim(),"data-testid":"grid-overlay","data-grid-mode":r,children:f.jsx("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",style:c,"aria-hidden":"true"})})});ot.__docgenInfo={description:`Grid component that renders a line grid either as a fullscreen overlay
or contained within its parent element.

@example
\`\`\`tsx
// Full screen overlay
<Grid mode="overlay" />

// Contained within parent
<div className="relative w-96 h-96">
  <Grid mode="contained" />
  <div>Your content here</div>
</div>

// Custom configuration
<Grid
  mode="overlay"
  cellSize={40}
  color="#CBD5E1"
  thickness={2}
  visible={showGrid}
  zIndex={100}
/>
\`\`\``,methods:[],displayName:"Grid",props:{mode:{required:!1,tsType:{name:"union",raw:'"overlay" | "contained"',elements:[{name:"literal",value:'"overlay"'},{name:"literal",value:'"contained"'}]},description:`Display mode of the grid.
- 'overlay': Fixed position covering entire viewport
- 'contained': Relative position within parent container
Default: 'overlay'`,defaultValue:{value:'"contained"',computed:!1}},cellSize:{required:!1,tsType:{name:"number"},description:"Size of each grid cell in pixels. Default: 20",defaultValue:{value:"20",computed:!1}},color:{required:!1,tsType:{name:"string"},description:"Color of grid lines in any valid CSS color format. Default: #E5E7EB",defaultValue:{value:'"rgba(225,225,225,0.05)"',computed:!1}},thickness:{required:!1,tsType:{name:"number"},description:"Line thickness in pixels. Default: 1",defaultValue:{value:"1",computed:!1}},visible:{required:!1,tsType:{name:"boolean"},description:"Controls grid visibility. Default: true",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Optional CSS class name to override default styles",defaultValue:{value:'""',computed:!1}},zIndex:{required:!1,tsType:{name:"number"},description:"Z-index for the grid. Default: 50",defaultValue:{value:"50",computed:!1}}}};const ce=I(N.flex.row.center,ae.colors,U.interactive.base,"relative w-full"),ue=I(N.flex.row.start,"flex-1 min-w-0",N.spacing.pad.sm),ne=I(N.flex.row.center,"flex-shrink-0",N.spacing.pad.sm),it={name:"listItem",elements:["content","startIcon","endIcon"],variants:{default:{root:I(ce,A.solid.dark,F.indicatorDark,U.interactive.selectedNeutral,V.default,"min-h-[40px]"),content:ue,startIcon:ne,endIcon:ne},inset:{root:I(ce,A.solid.darker,F.indicatorDark,U.interactive.selectedBright,V.default,"min-h-[40px]"),content:ue,startIcon:ne,endIcon:ne},ghost:{root:I(ce,A.solid.transparent,F.indicatorDark,U.interactive.selectedBright,V.default,"min-h-[40px]"),content:ue,startIcon:ne,endIcon:ne}}};function Ae({children:a,metadata:r,startIcon:e,endIcon:t,iconProps:n={},selected:s=!1,disabled:o=!1,focused:d=!1,variant:c="default",className:y,contentClassName:v,startIconClassName:l,endIconClassName:p,styleProps:u,onSelect:m,onClick:i,...b}){const h=g=>{o||(i==null||i(g),r&&(m==null||m(r)))},w=({elementProps:g,state:T,computedStyle:D})=>{const E=(g==null?void 0:g["data-component-id"])||"list-item",S={role:"option","aria-selected":s,"aria-disabled":o};return f.jsxs("div",{...g,id:E,className:D.root,onClick:h,tabIndex:o?-1:0,...S,children:[e&&f.jsx("span",{className:$(D.startIcon,l),children:Te.render(e,20,n)}),f.jsx("span",{className:$(D.content,v),children:a}),t&&f.jsx("span",{className:$(D.endIcon,p),children:Te.render(t,20,n)})]})};return f.jsx(H,{as:"div",stylePreset:it,styleProps:{variant:c,elements:{root:{base:y},content:{base:v},startIcon:{base:l},endIcon:{base:p}}},state:{isSelected:s,isDisabled:o,isFocused:d},renderElement:w,...b})}Ae.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},metadata:{required:!1,tsType:{name:"T"},description:""},startIcon:{required:!1,tsType:{name:"union",raw:"ComponentType<IconProps> | ReactNode",elements:[{name:"ComponentType",elements:[{name:"IconProps"}],raw:"ComponentType<IconProps>"},{name:"ReactNode"}]},description:""},endIcon:{required:!1,tsType:{name:"union",raw:"ComponentType<IconProps> | ReactNode",elements:[{name:"ComponentType",elements:[{name:"IconProps"}],raw:"ComponentType<IconProps>"},{name:"ReactNode"}]},description:""},iconProps:{required:!1,tsType:{name:"Partial",elements:[{name:"IconProps"}],raw:"Partial<IconProps>"},description:"",defaultValue:{value:"{}",computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},focused:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"ListItemVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""},startIconClassName:{required:!1,tsType:{name:"string"},description:""},endIconClassName:{required:!1,tsType:{name:"string"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(metadata: T) => void",signature:{arguments:[{type:{name:"T"},name:"metadata"}],return:{name:"void"}}},description:""}},composes:["Omit"]};const pe=I(N.flex.col.base,"relative h-full","focus-within:outline-none"),me=I(N.flex.col.base,"w-full","gap-0.5"),dt={name:"listView",elements:["list"],variants:{default:{root:I(pe,A.solid.dark,V.default),list:me},inset:{root:I(pe,A.solid.darker,Q.accent.all,V.default),list:me},ghost:{root:I(pe,A.solid.transparent,V.default),list:me}}};function lt({items:a,renderItem:r,itemProps:e,selectedIds:t=[],onSelectionChange:n,multiSelect:s=!1,variant:o="default",className:d,listClassName:c,maxHeight:y,styleProps:v,...l}){const p=x.useRef(null),u=x.useRef(null),m=x.useCallback(h=>{if(n)if(s){const w=t.includes(h.id)?t.filter(g=>g!==h.id):[...t,h.id];n(w),u.current=h.id}else n([h.id]),u.current=h.id},[t,n,s]),i=x.useCallback(h=>{const w=u.current?a.findIndex(g=>g.id===u.current):-1;switch(h.key){case"ArrowDown":{if(h.preventDefault(),w<a.length-1){const g=a[w+1];m(g)}break}case"ArrowUp":{if(h.preventDefault(),w>0){const g=a[w-1];m(g)}break}case"a":{s&&(h.ctrlKey||h.metaKey)&&(h.preventDefault(),n==null||n(a.map(g=>g.id)));break}}},[a,m,s,n]),b=({elementProps:h,state:w,computedStyle:g})=>{const T=(h==null?void 0:h["data-component-id"])||"list-view",D={role:"listbox","aria-multiselectable":s};return f.jsx("div",{...h,ref:p,id:T,className:g.root,onKeyDown:i,tabIndex:0,...D,children:f.jsx(oe,{maxHeight:y,variant:o==="default"?"ghost":o,children:f.jsx("div",{className:g.list,children:a.map(E=>f.jsx(Ae,{metadata:E,selected:t.includes(E.id),onSelect:m,variant:o,...e,children:r?r(E):E.id},E.id))})})})};return f.jsx(H,{as:"div",stylePreset:dt,styleProps:{variant:o,elements:{root:{base:d},list:{base:c}}},renderElement:b,...l})}lt.__docgenInfo={description:"",methods:[],displayName:"ListView",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},renderItem:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: T) => ReactNode",signature:{arguments:[{type:{name:"T"},name:"item"}],return:{name:"ReactNode"}}},description:""},itemProps:{required:!1,tsType:{name:"Partial",elements:[{name:"Omit",elements:[{name:"ListItemProps"},{name:"union",raw:'"metadata" | "selected" | "onSelect"',elements:[{name:"literal",value:'"metadata"'},{name:"literal",value:'"selected"'},{name:"literal",value:'"onSelect"'}]}],raw:'Omit<ListItemProps, "metadata" | "selected" | "onSelect">'}],raw:`Partial<
    Omit<ListItemProps, "metadata" | "selected" | "onSelect">
>`},description:""},selectedIds:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selectedIds: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"selectedIds"}],return:{name:"void"}}},description:""},multiSelect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"ListViewVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},maxHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""}},composes:["Omit"]};const qe=I(N.flex.col.base,A.solid.dark,Q.accent.all,He.rounded.md,ae.transform,"fixed z-100 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"),Ce=I(N.flex.row.between,N.spacing.pad.md,Q.accent.bottom,"h-10"),ke=I("flex-1 overflow-auto",N.spacing.pad.md),Ne=I(N.flex.row.between,N.spacing.pad.md,Q.accent.top,"h-14"),Re=I("fixed inset-0 bg-black/50","transition-opacity duration-300","z-80 w-screen h-screen"),ct={name:"modal",elements:["backdrop","header","content","footer"],variants:{default:{root:I(qe,A.solid.dark,V.default),backdrop:Re,header:Ce,content:ke,footer:Ne},elevated:{root:I(qe,A.solid.darker,"shadow-lg",V.default),backdrop:Re,header:Ce,content:ke,footer:Ne}}},ut=({children:a,title:r,footer:e,open:t=!1,onClose:n,variant:s="default",width:o=500,maxHeight:d="85vh",closeOnBackdropClick:c=!0,closeOnEscape:y=!0,showHeader:v=!!r,showFooter:l=!!e,showBackdrop:p=!0,className:u,headerClassName:m,contentClassName:i,footerClassName:b,backdropClassName:h,styleProps:w,...g})=>{const[T,D]=x.useState(!1);x.useEffect(()=>{t&&D(!0)},[t]),x.useEffect(()=>{if(!t||!y)return;const k=R=>{R.key==="Escape"&&(n==null||n())};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[t,y,n]);const E=x.useCallback(()=>{c&&(n==null||n())},[c,n]),S={"aria-hidden":!t},C=({elementProps:k,state:R,computedStyle:P})=>{const G=(k==null?void 0:k["data-component-id"])||"modal",O=`${G}-header`,te=`${G}-content`;return f.jsxs("div",{className:P.container,onTransitionEnd:()=>!t&&D(!1),...S,children:[p&&f.jsx("div",{className:$(P.backdrop,t?"opacity-100":"opacity-0",h),onClick:E,"aria-hidden":"true"}),f.jsxs("div",{...k,id:G,role:"dialog","aria-modal":"true","aria-labelledby":v?O:void 0,"aria-describedby":te,className:P.root,style:{width:o,maxHeight:d},children:[v&&f.jsx("div",{id:O,className:P.header,children:r}),f.jsx("div",{id:te,className:P.content,children:a}),l&&f.jsx("div",{className:P.footer,children:e})]})]})};return T?f.jsx(H,{as:"div",stylePreset:ct,styleProps:{variant:s,elements:{root:{base:u},header:{base:m},content:{base:i},footer:{base:b},backdrop:{base:h}}},renderElement:C,...g}):null};ut.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},title:{required:!1,tsType:{name:"ReactNode"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""},open:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},variant:{required:!1,tsType:{name:"ModalVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},width:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"500",computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:'"85vh"',computed:!1}},closeOnBackdropClick:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},closeOnEscape:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showHeader:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"!!title",computed:!1}},showFooter:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"!!footer",computed:!1}},showBackdrop:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},headerClassName:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""},footerClassName:{required:!1,tsType:{name:"string"},description:""},backdropClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const fe=I(N.flex.row.start,Q.accent.bottom,"relative"),ge=I(N.flex.row.centerFull,N.spacing.pad.md,ae.colors,U.interactive.base,F.indicatorDark,"relative min-w-[100px] h-10","after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5"),be=I("flex-1",N.spacing.pad.md),Be={name:"tabs",elements:["list","tab","panel"],variants:{default:{root:I(N.flex.col.base,A.solid.dark,"relative",V.default),list:fe,tab:I(ge,U.interactive.selectedBright,"after:bg-accent-dark-bright after:h-[1px]"),panel:be},ghost:{root:I(N.flex.col.base,A.solid.transparent,"relative",V.default),list:fe,tab:I(ge,U.interactive.selectedBright,"after:bg-accent-dark-bright after:h-[1px]"),panel:be},inset:{root:I(N.flex.col.base,A.solid.darker,Q.accent.all,"relative",V.default),list:fe,tab:I(ge,U.interactive.selectedNeutral,"after:bg-accent-dark-neutral after:h-[1px]"),panel:be}}},pt=({children:a,id:r,panelId:e,selected:t,disabled:n,variant:s="default",className:o,onClick:d})=>{const c=({elementProps:y,state:v,computedStyle:l})=>{const p={role:"tab","aria-selected":v.isSelected,"aria-disabled":v.isDisabled,"aria-controls":e};return f.jsx("button",{...y,id:r,type:"button",className:$(l.tab,o),onClick:d,disabled:v.isDisabled,...p,children:a})};return f.jsx(H,{as:"button",stylePreset:Be,styleProps:{variant:s,elements:{root:{base:o}}},state:{isSelected:t,isDisabled:n,isHovered:!1,isPressed:!1,isActive:!1,isVisible:!0,isEditable:!1,isEditing:!1},renderElement:c})},mt=({children:a,id:r,tabId:e,selected:t,className:n})=>t?f.jsx("div",{id:r,role:"tabpanel","aria-labelledby":e,className:n,tabIndex:0,children:a}):null,ft=({tabs:a,variant:r="default",defaultTab:e,selectedTab:t,disabled:n,onTabChange:s,className:o,listClassName:d,tabClassName:c,panelClassName:y,styleProps:v,...l})=>{const[p,u]=x.useState(e||(a.length>0?a[0].id:"")),m=t??p,i=x.useCallback(h=>{n||(t===void 0&&u(h),s==null||s(h))},[t,s,n]),b=({elementProps:h,state:w,computedStyle:g})=>{const T=(h==null?void 0:h["data-component-id"])||"tabs",D={role:"tablist","aria-orientation":"horizontal","aria-disabled":n?"true":"false"};return f.jsxs("div",{...h,id:T,className:g.root,"data-disabled":n?"true":"false",children:[f.jsx("div",{className:$(g.list,d),...D,children:a.map(E=>{const S=m===E.id,C=`${T}-tab-${E.id}`,k=`${T}-panel-${E.id}`,R=n||E.disabled;return f.jsx(pt,{id:C,panelId:k,selected:S,disabled:R,onClick:()=>!R&&i(E.id),variant:r,className:c,children:E.label},E.id)})}),a.map(E=>{const S=m===E.id,C=`${T}-tab-${E.id}`,k=`${T}-panel-${E.id}`;return f.jsx(mt,{id:k,tabId:C,selected:S,className:$(g.panel,y),children:E.content},E.id)})]})};return f.jsx(H,{as:"div",stylePreset:Be,styleProps:{variant:r,elements:{root:{base:o},list:{base:d},tab:{base:c},panel:{base:y}}},renderElement:b,...l})};ft.__docgenInfo={description:"",methods:[],displayName:"Tabs",props:{tabs:{required:!0,tsType:{name:"Array",elements:[{name:"TabItem"}],raw:"TabItem[]"},description:""},variant:{required:!1,tsType:{name:"TabsVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},defaultTab:{required:!1,tsType:{name:"string"},description:""},selectedTab:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onTabChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(tabId: string) => void",signature:{arguments:[{type:{name:"string"},name:"tabId"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},tabClassName:{required:!1,tsType:{name:"string"},description:""},panelClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const gt=I(N.flex.row.center,F.indicatorDark,ae.colors,U.interactive.base,"gap-2 px-2 py-1 min-h-[32px] [&draggable]:cursor-grab"),bt={name:"treeItem",elements:["content","icon","caret"],variants:{default:{root:I(gt,U.interactive.selectedNeutral,"hover:bg-accent-dark-neutral/20","relative before:absolute before:inset-0 before:pointer-events-none","data-drop-before:before:border-t-2 data-drop-before:before:border-accent-dark-bright","data-drop-after:before:border-b-2 data-drop-after:before:border-accent-dark-bright","data-drop-inside:before:bg-accent-dark-bright/20"),content:I("flex-grow",F.default.base),icon:I("flex-shrink-0",F.indicatorDark),caret:I("flex-shrink-0",F.indicatorDark)}}},yt={name:"treeView",elements:["tree"],variants:{default:{root:I(N.flex.col.base,A.solid.dark,"h-full"),tree:I("flex-1")}}},ie=x.memo(({item:a,level:r,selectionManager:e,onMove:t,className:n,contentClassName:s,iconClassName:o,styleProps:d,...c})=>{var b,h;const y=x.useRef(null),v=!!((b=a.children)!=null&&b.length),l=e.isSelected(a.id),p=e.isExpanded(a.id),u=()=>{a.disabled||e.toggleSelection(a.id)},m=w=>{w.stopPropagation(),v&&e.toggleExpansion(a.id)},i=({elementProps:w,state:g,computedStyle:T})=>{const D=a.icon,E={role:"treeitem","aria-selected":g.isSelected,"aria-expanded":v?g.isActive:void 0,"aria-disabled":g.isDisabled,"aria-level":r},S=$(T.root,g.isDragging&&"opacity-50 bg-accent-dark-bright/30",g.isDragging&&Oe.base);return f.jsxs("div",{...w,ref:y,style:{paddingLeft:`${r*20}px`},className:S,onClick:u,...E,children:[f.jsx("div",{className:$(T.caret,"w-4 h-4 flex items-center justify-center",!v&&"invisible"),onClick:m,children:f.jsx($e,{size:12,className:$("transition-transform duration-200",p&&"rotate-180")})}),D&&f.jsx("div",{className:T.icon,children:f.jsx(D,{size:16})}),f.jsx("div",{className:T.content,children:a.label})]})};return f.jsxs(f.Fragment,{children:[f.jsx(H,{as:"div",stylePreset:bt,styleProps:{variant:"default",elements:{root:{base:$(n,"relative before:absolute before:inset-0 before:pointer-events-none","data-drop-before:before:border-t-2 data-drop-before:before:border-accent-dark-bright","data-drop-after:before:border-b-2 data-drop-after:before:border-accent-dark-bright","data-drop-inside:before:bg-accent-dark-bright/20")},content:{base:s},icon:{base:o}}},state:{isSelected:l,isActive:p,isDisabled:a.disabled,isEditing:!0},draggable:!a.disabled&&a.canDrag!==!1,dragType:"tree-item",dragData:{id:a.id,data:{level:r,hasChildren:v,parentId:a.parentId}},droppable:!a.disabled&&a.canDrag!==!1,acceptTypes:["tree-item"],dropPositions:["before","after",...a.canDrop?["inside"]:[]],onDrop:(w,g,T)=>{console.log("TreeItem onDrop:",{draggedId:g.id,target:T,item:a}),t==null||t(g.id,T)},renderElement:i,elementRef:y,...c}),p&&((h=a.children)==null?void 0:h.map(w=>f.jsx(ie,{item:w,level:r+1,selectionManager:e,onMove:t},w.id)))]})});ie.displayName="TreeItem";ie.__docgenInfo={description:"",methods:[],displayName:"TreeItem",props:{item:{required:!0,tsType:{name:"TreeItemData"},description:""},level:{required:!0,tsType:{name:"number"},description:""},selectionManager:{required:!0,tsType:{name:"TreeSelectionManager"},description:""},onMove:{required:!1,tsType:{name:"signature",type:"function",raw:"(draggedId: string, target: DropTarget) => void",signature:{arguments:[{type:{name:"string"},name:"draggedId"},{type:{name:"DropTarget"},name:"target"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},contentClassName:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const ht=({items:a,selectedIds:r,defaultSelectedIds:e=[],onSelectionChange:t,expandedIds:n,defaultExpandedIds:s=[],onExpansionChange:o,onMove:d,multiSelect:c=!1,maxHeight:y,className:v,treeClassName:l,styleProps:p,...u})=>{const[m,i]=x.useState(new Set(e)),[b,h]=x.useState(new Set(s)),w=x.useMemo(()=>new Set(r||Array.from(m)),[r,m]),g=x.useMemo(()=>new Set(n||Array.from(b)),[n,b]),T=x.useMemo(()=>({selectedIds:w,expandedIds:g,toggleSelection:(C,k="toggle")=>{const R=new Set(w);(!c||k==="single")&&R.clear(),R.has(C)?R.delete(C):R.add(C),r===void 0&&i(R),t==null||t(Array.from(R))},toggleExpansion:C=>{const k=new Set(g);k.has(C)?k.delete(C):k.add(C),n===void 0&&h(k),o==null||o(Array.from(k))},isSelected:C=>w.has(C),isExpanded:C=>g.has(C)}),[w,g,c,r,n,t,o]),D=x.useCallback((C,k)=>{console.log("Tree handleMove:",{draggedId:C,target:k});const R=[...a];let P,G,O=-1;const te=(_,q)=>{var W;for(let B=0;B<_.length;B++){if(_[B].id===C)return P=_[B],G=q,O=B,!0;if((W=_[B].children)!=null&&W.length&&te(_[B].children,_[B]))return!0}return!1};if(te(R),!P)return;G?G.children.splice(O,1):R.splice(O,1);let Y,J,Z=-1;const se=(_,q)=>{var W;for(let B=0;B<_.length;B++){if(_[B].id===k.id)return Y=_[B],J=q,Z=B,!0;if((W=_[B].children)!=null&&W.length&&se(_[B].children,_[B]))return!0}return!1};if(se(R),!!Y){switch(k.position){case"before":J?J.children.splice(Z,0,P):R.splice(Z,0,P);break;case"after":J?J.children.splice(Z+1,0,P):R.splice(Z+1,0,P);break;case"inside":Y.children=Y.children||[],Y.children.push(P),g.has(Y.id)||T.toggleExpansion(Y.id);break}console.log("Updated tree structure:",R),d==null||d(R)}},[a,g,T,d]),E={role:"tree"},S=({elementProps:C,state:k,computedStyle:R})=>f.jsx("div",{...C,className:R.root,...E,children:f.jsx(oe,{maxHeight:y,variant:"ghost",className:R.tree,children:a.map(P=>f.jsx(ie,{item:P,level:0,selectionManager:T,onMove:D},P.id))})});return f.jsx(H,{as:"div",stylePreset:yt,styleProps:{variant:"default",elements:{root:{base:v},tree:{base:l}}},renderElement:S,...u})};ht.__docgenInfo={description:"",methods:[],displayName:"TreeView",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"TreeItemData"}],raw:"TreeItemData[]"},description:""},selectedIds:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},defaultSelectedIds:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},expandedIds:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},defaultExpandedIds:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onExpansionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},onMove:{required:!1,tsType:{name:"signature",type:"function",raw:"(items: TreeItemData[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"TreeItemData"}],raw:"TreeItemData[]"},name:"items"}],return:{name:"void"}}},description:""},multiSelect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},treeClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const vt={none:"",sm:"gap-1",md:"gap-2",lg:"gap-3"},xt=({items:a,selectionMode:r="single",defaultSelected:e=[],selected:t,onSelectionChange:n,orientation:s="horizontal",className:o,buttonClassName:d,spacing:c="none",size:y="md",variant:v="default"})=>{const[l,p]=x.useState(e),u=t??l,m=x.useCallback(i=>{if(r==="none")return;let b;switch(r){case"single":b=[i];break;case"toggle":u.includes(i)?b=[]:b=[i];break;case"multiple":u.includes(i)?b=u.filter(h=>h!==i):b=[...u,i];break;default:b=u;break}t===void 0&&p(b),n==null||n(b)},[r,u,t,n]);return f.jsx("div",{className:$("flex",s==="horizontal"?"flex-row":"flex-col",vt[c],o),children:a.map(i=>{var w,g;const b=u.includes(i.id);return(i.type||"icon")==="icon"?f.jsx(ve,{icon:i.icon,tooltip:i.tooltip,variant:v,size:y,disabled:i.disabled,selected:b,onClick:()=>m(i.id),className:$(d,(w=i.buttonProps)==null?void 0:w.className),...i.buttonProps},i.id):f.jsx(tt,{startIcon:i.icon,variant:v,disabled:i.disabled,selected:b,onClick:()=>m(i.id),className:$(d,(g=i.buttonProps)==null?void 0:g.className),...i.buttonProps,children:i.label},i.id)})})};xt.__docgenInfo={description:"",methods:[],displayName:"ButtonStrip",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"ButtonStripItem"}],raw:"ButtonStripItem[]"},description:""},selectionMode:{required:!1,tsType:{name:"union",raw:'"single" | "multiple" | "toggle" | "none"',elements:[{name:"literal",value:'"single"'},{name:"literal",value:'"multiple"'},{name:"literal",value:'"toggle"'},{name:"literal",value:'"none"'}]},description:"",defaultValue:{value:'"single"',computed:!1}},defaultSelected:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},selected:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selected: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"selected"}],return:{name:"void"}}},description:""},orientation:{required:!1,tsType:{name:"union",raw:'"horizontal" | "vertical"',elements:[{name:"literal",value:'"horizontal"'},{name:"literal",value:'"vertical"'}]},description:"",defaultValue:{value:'"horizontal"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},buttonClassName:{required:!1,tsType:{name:"string"},description:""},spacing:{required:!1,tsType:{name:"union",raw:'"none" | "sm" | "md" | "lg"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'}]},description:"",defaultValue:{value:'"none"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:'"sm" | "md" | "lg"',elements:[{name:"literal",value:'"sm"'},{name:"literal",value:'"md"'},{name:"literal",value:'"lg"'}]},description:"",defaultValue:{value:'"md"',computed:!1}},variant:{required:!1,tsType:{name:"union",raw:'"default" | "ghost" | "outline"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"ghost"'},{name:"literal",value:'"outline"'}]},description:"",defaultValue:{value:'"default"',computed:!1}}}};x.createContext(void 0);const wt=xe((a,r)=>({registeredTargets:new Set,isDragging:!1,dragSource:null,dragData:null,dropTargets:[],activeDropTarget:null,dropIndicators:[],startDrag:e=>{console.log(`Starting drag: ${e.type}/${e.id}`),a({isDragging:!0,dragSource:e,dragData:e.data})},endDrag:()=>{console.log("Ending drag"),a({isDragging:!1,dragSource:null,dragData:null,activeDropTarget:null}),r().clearDropIndicators()},registerDropTarget:e=>{const t=e.id,n=r();n.registeredTargets.has(t)||(n.registeredTargets.add(t),a(s=>({dropTargets:[...s.dropTargets.filter(o=>o.id!==e.id),e]})))},unregisterDropTarget:e=>{const t=r();t.registeredTargets.has(e)&&(t.registeredTargets.delete(e),a(n=>n.dropTargets.some(o=>o.id===e)?{dropTargets:n.dropTargets.filter(o=>o.id!==e)}:n))},setActiveDropTarget:e=>{const t=e?r().dropTargets.find(n=>n.id===e):null;a({activeDropTarget:t||null})},addDropIndicator:e=>{a(t=>({dropIndicators:[...t.dropIndicators,e]}))},clearDropIndicators:()=>{r().dropIndicators.forEach(e=>{e.element&&e.element.remove()}),a({dropIndicators:[]})},handleDrop:(e,t)=>{const{dragSource:n,dropTargets:s}=r();if(!n)return!1;const o=s.find(d=>d.id===t);return o?o.accepts.includes(n.type)?(console.log(`Dropping ${n.type}/${n.id} onto ${o.type}/${o.id}`),r().endDrag(),!0):(console.log(`Drop target ${t} does not accept ${n.type}`),!1):!1}}));function Tt(a,r,e,t){const{startDrag:n,endDrag:s,isDragging:o,dragSource:d}=wt(),c=x.useRef(null),[y,v]=x.useState(!1),[l,p]=x.useState(!1),u=y||o&&(d==null?void 0:d.id)===r,m=(t==null?void 0:t.crossWidgetEnabled)!==!1,i=x.useCallback(w=>{if(t!=null&&t.disabled)return;console.log(`Drag start: ${a}/${r}`),w.stopPropagation();const g=JSON.stringify({type:a,id:r,widgetId:e.widgetId,parentId:e.parentId,data:{...e,componentType:e.componentType,instanceId:e.instanceId,definitionId:e.definitionId,position:e.position,size:e.size}});if(w.dataTransfer.setData("application/json",g),w.dataTransfer.effectAllowed="move",t!=null&&t.dragPreview)if(t.dragPreview instanceof HTMLElement)w.dataTransfer.setDragImage(t.dragPreview,0,0);else{const{element:T,offsetX:D=0,offsetY:E=0}=t.dragPreview;w.dataTransfer.setDragImage(T,D,E)}n({id:r,type:a,data:e,element:c.current||void 0}),m&&(document.body.classList.add("cross-widget-drag-active"),c.current&&(c.current.setAttribute("data-cross-widget-drag","true"),e.widgetId&&e.widgetId!=="palette"&&c.current.setAttribute("data-source-widget-id",e.widgetId.toString())),p(!0)),v(!0),document.body.style.cursor="grabbing"},[r,a,e,t,n,m]),b=x.useCallback(w=>{console.log(`Drag end: ${a}/${r}`),w.stopPropagation(),m&&(document.body.classList.remove("cross-widget-drag-active"),c.current&&(c.current.removeAttribute("data-cross-widget-drag"),c.current.removeAttribute("data-source-widget-id")),p(!1)),s(),v(!1),document.body.style.cursor="default"},[r,a,s,m]);return{dragProps:{ref:c,draggable:!(t!=null&&t.disabled),onDragStart:i,onDragEnd:b,"data-drag-id":r,"data-drag-type":a,...e.widgetId&&e.widgetId!=="palette"?{"data-source-widget-id":e.widgetId.toString()}:{},"data-cross-widget":m?"true":"false",className:`${u?"dragging":""} ${l?"cross-widget-draggable":""}`},isDragging:u,isCrossWidgetDrag:l,elementRef:c}}const ye={Widget:je,Panel:he,ScrollBox:he,PushButton:Ue,Input:Fe,Label:Ge},z=xe()(Ye((a,r)=>({widgets:{},activeWidgetId:null,createWidget:(e,t,n="canvas")=>{const s=de(`widget-${le(6)}`),o={id:s,name:e,label:e,position:t,size:Ie.fromValue([300,200],Ie.minimum()),components:[],layoutType:"free",isEditMode:!0,displayType:n,isVisible:n==="canvas",zIndex:n==="modal"?1e3:0,dragHandle:".drag-handle__widget"};return a(d=>({widgets:{...d.widgets,[s]:o},activeWidgetId:d.activeWidgetId===null&&n==="canvas"?s:d.activeWidgetId})),o},updateWidget:(e,t)=>{a(n=>{const s=n.widgets[e];return s?{widgets:{...n.widgets,[e]:{...s,...t}}}:n})},deleteWidget:e=>{a(t=>{const n={...t.widgets};delete n[e];let s=t.activeWidgetId;if(s===e){const o=Object.values(n).filter(d=>d.displayType==="canvas"&&d.isVisible);s=o.length>0?o[0].id:null}return{widgets:n,activeWidgetId:s}})},showWidget:e=>{a(t=>{const n=t.widgets[e];return n?{widgets:{...t.widgets,[e]:{...n,isVisible:!0}}}:t})},hideWidget:e=>{a(t=>{const n=t.widgets[e];return n?{widgets:{...t.widgets,[e]:{...n,isVisible:!1}}}:t})},toggleWidget:e=>{a(t=>{const n=t.widgets[e];return n?{widgets:{...t.widgets,[e]:{...n,isVisible:!n.isVisible}}}:t})},addComponentToWidget:(e,t,n,s)=>{if(!n||typeof n!="string")return console.error("Invalid instanceId parameter. Expected EntityId, got:",n),null;if(!s||!s.x||!s.y)return console.error("Invalid position parameter. Expected Position object, got:",s),null;const o=r().widgets[e];if(!o)return null;const d=de(`component-${le(6)}`),c={id:d,definitionId:t,instanceId:n,position:s,size:{width:{value:100,unit:"px"},height:{value:40,unit:"px"}},zIndex:o.components.length,childIds:[]};return a(y=>{const v={...o,components:[...o.components,c]};return{widgets:{...y.widgets,[e]:v}}}),o.isEditMode||setTimeout(()=>{const y=r().widgets[e];if(!y)return;let v=0,l=0;const p={x:20,y:20};y.components.forEach(w=>{const g=w.position.x.value+w.size.width.value,T=w.position.y.value+w.size.height.value;v=Math.max(v,g),l=Math.max(l,T)});const u=v+p.x,m=l+p.y,h={width:{value:Math.max(200,u),unit:"px"},height:{value:Math.max(100,m),unit:"px"}};r().updateWidget(e,{size:h})},50),j.publish("component:added",{widgetId:e,componentId:d}),c},updateComponent:(e,t,n)=>{a(s=>{const o=s.widgets[e];if(!o)return s;const d=o.components.map(c=>c.id==t?{...c,...n}:c);return j.publish("component:updated",{widgetId:e,componentId:t}),{widgets:{...s.widgets,[e]:{...o,components:d}}}})},removeComponent:(e,t)=>{a(n=>{const s=n.widgets[e];if(!s)return n;const o=s.components.filter(d=>d.id!==t);return j.publish("component:deleted",{widgetId:e,componentId:t}),{widgets:{...n.widgets,[e]:{...s,components:o}}}})},findComponent:(e,t)=>{const n=r().widgets[e];return n&&n.components.find(s=>s.id===t)||null},findComponentByInstanceId:e=>{const t=r().widgets;for(const n in t){const o=t[n].components.find(d=>d.instanceId===e);if(o)return{component:o,widgetId:n}}return{component:null,widgetId:null}},bindComponentToWidget:(e,t,n,s="show")=>{a(o=>{const d=o.widgets[e];if(!d)return o;const c=d.components.map(y=>y.id===t?{...y,actionBindings:{targetWidgetId:n,action:s}}:y);return{widgets:{...o.widgets,[e]:{...d,components:c}}}})},addChildComponent:(e,t,n,s,o={x:{value:10,unit:"px"},y:{value:10,unit:"px"}})=>{var v;const c=r().widgets[e];if(!c)return console.error(`Widget ${e} not found`),null;const y=c.components.find(l=>l.id===t);if(!y)return console.error(`Parent component ${t} not found in widget ${e}`),null;try{const l=de(`component-${le(6)}`),p={id:l,definitionId:n,instanceId:s,position:o,size:{width:{value:100,unit:"px"},height:{value:40,unit:"px"}},zIndex:((v=y.childIds)==null?void 0:v.length)||0,parentId:t,childIds:[]},u={...y,childIds:[...y.childIds||[],l]};return a(m=>{const i=c.components.map(b=>b.id===t?u:b);return i.push(p),{widgets:{...m.widgets,[e]:{...c,components:i}}}}),j.publish("hierarchy:changed",{widgetId:e}),p}catch(l){return console.error("Error creating child component:",l),null}},moveComponent:(e,t,n,s)=>{a(d=>{const c=d.widgets[e],y=s||e,v=d.widgets[y];if(!c||!v)return console.error("Source or destination widget not found"),d;const l=c.components.find(u=>u.id===t);if(!l)return console.error(`Component ${t} not found in source widget`),d;if(y===e&&n){let u=c.components.find(i=>i.id===n),m=!1;for(;u&&u.parentId;){if(u.parentId===t){console.warn("Cannot create circular reference in component hierarchy"),m=!0;break}u=c.components.find(i=>i.id===u.parentId)}if(m)return d}const p={...d};if(y===e){const u=l.parentId,m=c.components.map(i=>i.id===t?{...i,parentId:n||void 0}:i.id===u?{...i,childIds:i.childIds.filter(b=>b!==t)}:i.id===n?{...i,childIds:[...i.childIds,t]}:i);p.widgets[e]={...c,components:m}}else{const m=((b,h)=>{const w=[],g=b.find(D=>D.id===h);if(!g)return w;w.push(g);const T=D=>{const E=b.filter(S=>S.parentId===D);for(const S of E)w.push(S),T(S.id)};return T(h),w})(c.components,t);p.widgets[e]={...c,components:c.components.filter(b=>!m.some(h=>h.id===b.id))},p.widgets[e].components=p.widgets[e].components.map(b=>{const h=b.childIds.filter(w=>!m.some(g=>g.id===w));return h.length!==b.childIds.length?{...b,childIds:h}:b});const i=m.map(b=>b.id===t?{...b,parentId:n||void 0}:b);p.widgets[y]={...v,components:[...v.components,...i]},n&&(p.widgets[y].components=p.widgets[y].components.map(b=>b.id===n?{...b,childIds:[...b.childIds,t]}:b))}return p}),s&&s!==e?(j.publish("component:moved",{sourceWidgetId:e,destinationWidgetId:s,componentId:t,parentId:n}),j.publish("hierarchy:changed",{widgetId:e}),j.publish("hierarchy:changed",{widgetId:s})):(j.publish("component:moved",{widgetId:e,componentId:t,parentId:n}),j.publish("hierarchy:changed",{widgetId:e}))},getComponentHierarchy:(e,t={})=>{const{debug:n=!1,includeWidget:s=!0}=t,o=r().widgets[e];if(!o)return Promise.resolve([]);if(n){console.log(`Building hierarchy for widget ${e} with ${o.components.length} components`);const l={};o.components.forEach(p=>{const u=p.parentId?p.parentId:"root";l[u]||(l[u]=[]),l[u].push({id:p.id,type:p.definitionId.toString().split("-")[0]})}),console.log("Parent-child relationships:",l)}const d=async l=>{try{return(await Ke(()=>import("./ThemeAwareText-aBl3ngNK.js").then(m=>m.a6),__vite__mapDeps([0,1,2,3,4]))).useComponentStore.getState().getInstance(l)}catch(p){return n&&console.error(`Failed to load instance ${l}:`,p),null}},c=async l=>{try{const p=o.components.filter(w=>w.parentId===l.id);n&&console.log(`Component ${l.id} has ${p.length} children`);let u;try{u=await d(l.instanceId)}catch{n&&console.warn(`Instance not found for component ${l.id}`)}const m=(u==null?void 0:u.type)||"unknown",i=(u==null?void 0:u.label)||l.id.toString().split("-")[0];let b=ye.Panel;ye[m]&&(b=ye[m]);const h=m==="Panel"||m==="ScrollBox"||m==="Drawer"||m==="Tabs";return{id:`${e}/${l.id}`,type:m,label:i,icon:b,canDrop:h,canDrag:!0,data:{componentId:l.id,widgetId:e,instanceId:l.instanceId,definitionId:l.definitionId},parentId:l.parentId?`${e}/${l.parentId}`:void 0,children:await Promise.all(p.map(c))}}catch(p){return console.error(`Error building tree for component ${l.id}:`,p),{id:`${e}/${l.id}`,type:"error",label:`Error: ${l.id}`,icon:he,canDrop:!1,canDrag:!1,children:[]}}},y=o.components.filter(l=>!l.parentId);return n&&console.log(`Found ${y.length} root components`),(async()=>{const l=await Promise.all(y.map(c));return s?[{id:e,type:"Widget",label:o.label||"Widget",icon:je,canDrop:!0,canDrag:!1,children:l}]:l})()},reorderComponents:(e,t,n,s,o)=>{a(d=>{console.log(`ARRAY REORDER: ${n} ${o} ${s} in ${t}`);const c=d.widgets[e];if(!c)return d;const y=c.components,v=t===e,l=y.find(T=>T.id===n);if(!l)return console.error(`Component ${n} not found`),d;if(!y.find(T=>T.id===s))return console.error(`Target ${s} not found`),d;const u=y.filter(T=>T.id!==n),m=u.findIndex(T=>T.id===s);if(m===-1)return console.error(`Target ${s} not found after filtering`),d;const i=o==="before"?m:m+1,b=v?void 0:t,h=l.parentId!==b,w=h?{...l,parentId:b}:l,g=[...u.slice(0,i),w,...u.slice(i)];if(h){if(l.parentId){const T=g.findIndex(D=>D.id===l.parentId);T!==-1&&(g[T]={...g[T],childIds:g[T].childIds.filter(D=>D!==n)})}if(b){const T=g.findIndex(D=>D.id===b);T!==-1&&(g[T]={...g[T],childIds:[...g[T].childIds||[],n]})}}return console.log("BEFORE:",y.map(T=>T.id).join(", ")),console.log("AFTER:",g.map(T=>T.id).join(", ")),{widgets:{...d.widgets,[e]:{...c,components:g}}}}),j.publish("component:reordered",{widgetId:e,containerId:t,componentId:n,targetId:s,position:o}),j.publish("hierarchy:changed",{widgetId:e})},convertToNodes:()=>{const{widgets:e}=r();return Object.values(e).filter(t=>t.displayType==="canvas"&&t.isVisible).map(t=>({id:t.id,type:"widget",position:Xe.toXYPosition(t.position),data:t,dragHandle:".drag-handle__widget"}))},getWidget:e=>r().widgets[e],getVisibleWidgets:e=>{const{widgets:t}=r();return Object.values(t).filter(n=>n.isVisible&&(!e||n.displayType===e))},purgeStore:(e={})=>{const t=r(),{keepWidgets:n=!1}=e,s=Object.keys(t.widgets).length;return n||a({widgets:{},activeWidgetId:null}),{widgetCount:s}},setActiveWidget:e=>{a({activeWidgetId:e})}}),{name:"omni-ui-widgets"})),It={_createComponent(a,r,e={}){try{const t=re.getState(),n=z.getState(),s=t.createFromDefinition(r,e.overrides||{});if(!s||!s.id)return console.error("Failed to create component instance"),null;const o=e.position||{x:{value:10,unit:"px"},y:{value:10,unit:"px"}},d=n.addComponentToWidget(a,r,s.id,o);return d?(e.parentId&&n.moveComponent(a,d.id,e.parentId),e.autoSelect&&d&&ee.getState().selectComponent(d.id,a,{openPropertyPanel:e.openPropertyPanel}),d):(t.deleteInstance(s.id),null)}catch(t){return console.error("Error creating component:",t),null}},createWidget(a,r){try{const e=z.getState().createWidget(a,r);return j.publish("widget:created",{widgetId:e.id}),e}catch(e){return console.error("Error creating widget:",e),null}},updateWidgetPosition(a,r){try{return z.getState().updateWidget(a,{position:r}),j.publish("widget:updated",{widgetId:a,action:"moved"}),!0}catch(e){return console.error("Error updating widget position:",e),!1}},deleteWidget(a){try{const r=ee.getState();return r.selectedWidgetId===a&&r.deselectAll(),z.getState().deleteWidget(a),j.publish("widget:deleted",{widgetId:a}),!0}catch(r){return console.error("Error deleting widget:",r),!1}},addComponentToWidget(a,r,e,t={}){const n=this._createComponent(a,r,{position:e,size:t.size,overrides:t.overrides,autoSelect:t.autoSelect!==!1,openPropertyPanel:t.openPropertyPanel!==!1});return n&&j.publish("component:added",{componentId:n.id,widgetId:a}),n},addChildComponent(a,r,e,t,n={}){const s=this._createComponent(a,e,{position:t,parentId:r,size:n.size,overrides:n.overrides,autoSelect:n.autoSelect!==!1,openPropertyPanel:n.openPropertyPanel!==!1});return s&&j.publish("component:added",{componentId:s.id,widgetId:a,parentId:r}),s},deleteComponent(a,r){try{const e=z.getState(),t=re.getState(),n=ee.getState(),s=e.findComponent(a,r);if(!s)return!1;const o=s.parentId;n.selectedComponentId===r&&n.deselectAll(),e.removeComponent(a,r);try{t.deleteInstance(s.instanceId)}catch(d){console.warn("Could not delete component instance:",d)}return j.publish("component:deleted",{componentId:r,widgetId:a,parentId:o}),!0}catch(e){return console.error("Failed to delete component:",e),!1}},moveComponent(a,r,e,t,n=!0){try{const s=z.getState(),o=re.getState(),d=ee.getState(),c=s.findComponent(a,r);if(!c)return!1;const y=t&&t!==a;if(y&&n){const v=s.getWidget(a);if(!v)return!1;[c,...(u=>{const m=[],i=b=>{const h=v.components.filter(w=>w.parentId===b);m.push(...h),h.forEach(w=>i(w.id))};return i(u),m})(r)].forEach(u=>{const m=o.getInstance(u.instanceId);if(m){const i=o.createFromDefinition(u.definitionId,m.overrides||{});u.instanceId=i.id}})}return s.moveComponent(a,r,e,t),d.selectedComponentId===r&&(y?t&&d.selectComponent(r,t):d.selectComponent(r,a)),!0}catch(s){return console.error("Error moving component:",s),!1}},reorderComponents(a,r,e,t,n){try{console.log(`[BUILDER] Reordering component ${e} to be ${n} ${t}`),console.log(`[BUILDER] Container: ${r}`);const s=z.getState(),o=s.getWidget(a);if(!o)return console.error(`[BUILDER] Widget ${a} not found`),!1;if(!o.components.find(p=>p.id===e))return console.error(`[BUILDER] Component ${e} not found`),!1;const c=o.components.find(p=>p.id===t);if(!c)return console.error(`[BUILDER] Target ${t} not found`),!1;if(r!==a){if(!o.components.find(u=>u.id===r))return console.error(`[BUILDER] Container ${r} not found`),!1;if(c.parentId!==r)return console.error(`[BUILDER] Target ${t} is not a child of container ${r}`),!1}else if(c.parentId)return console.error(`[BUILDER] Target ${t} is not at root level`),!1;const y=r===a,v=o.components.filter(p=>y?!p.parentId:p.parentId===r);console.log("[BUILDER] Before reordering:"),console.log(v.map(p=>({id:p.id,zIndex:p.zIndex}))),z.getState().reorderComponents(a,r,e,t,n);const l=s.getWidget(a);if(l){const p=l.components.filter(i=>y?!i.parentId:i.parentId===r).sort((i,b)=>i.zIndex-b.zIndex);console.log("[BUILDER] After reordering:"),console.log(p.map(i=>({id:i.id,zIndex:i.zIndex})));const u=p.findIndex(i=>i.id===e),m=p.findIndex(i=>i.id===t);if(u===-1)return console.error(`[BUILDER] Component ${e} not found after reordering`),!1;if(m===-1)return console.error(`[BUILDER] Target ${t} not found after reordering`),!1;n==="before"&&u>m?console.warn(`[BUILDER] Component ${e} is not before ${t}`):n==="after"&&u!==m+1&&console.warn(`[BUILDER] Component ${e} is not after ${t}`)}return j.publish("component:reordered",{componentId:e,widgetId:a,containerId:r,targetId:t,position:n}),j.publish("hierarchy:changed",{widgetId:a}),!0}catch(s){return console.error("[BUILDER] Error reordering components:",s),!1}},findComponentByInstanceId(a){return z.getState().findComponentByInstanceId(a)},getComponentInfo(a,r){try{const e=z.getState(),t=re.getState(),n=e.findComponent(a,r);if(!n)return null;let s=null,o=null;try{s=t.getInstance(n.instanceId),o=s.type}catch(d){console.warn("Could not get component instance:",d)}return{componentId:r,widgetId:a,instanceId:n.instanceId,type:o,component:n,instance:s}}catch(e){return console.error("Failed to get component info:",e),null}},selectComponentByInstanceId(a){try{const r=z.getState(),e=ee.getState(),{component:t,widgetId:n}=r.findComponentByInstanceId(a);return!t||!n?!1:(e.selectComponent(t.id,n),!0)}catch(r){return console.error("Failed to select component by instance ID:",r),!1}},updateComponent(a,r,e){try{return z.getState().updateComponent(a,r,e),j.publish("component:updated",{componentId:r,widgetId:a}),!0}catch(t){return console.error("Error updating component:",t),!1}},resetAllStores(a={keepSystemComponents:!0}){const r=z.getState(),e=re.getState(),t=ee.getState();t.deselectAll(),t.resetState();const n=r.purgeStore(),s=e.purgeStore({keepSystemComponents:a.keepSystemComponents,resetToDefaults:!0});return{widgetCount:n.widgetCount,definitionCount:s.definitionCount,instanceCount:s.instanceCount}}};function Et(a="component-drag-drop-styles"){const r=x.useRef(!1);return x.useEffect(()=>{if(document.getElementById(a)){r.current=!0;return}const e=document.createElement("style");return e.id=a,e.textContent=`
      /* Component Drag & Drop Styles */

      /* Main component container */
      .component-container {
          position: relative;
          transition: all 0.15s ease;
          border-radius: 3px;
          margin-bottom: 8px;
          width: 100%;
      }

      /* Container highlighting when in edit mode */
      [data-edit-mode="true"] .component-container {
          position: relative;
      }

      /* Selection highlighting */
      .component-container.selected-component,
      [data-selected="true"] {
          outline: 2px solid #3b82f6 !important;
          z-index: 5 !important;
          box-shadow: 0 0 8px rgba(59, 130, 246, 0.3) !important;
      }

      /* Hover state */
      [data-edit-mode="true"] .component-container:hover {
          outline: 1px solid rgba(59, 130, 246, 0.3);
      }

      /* Dragging state */
      .component-container.dragging-component {
          opacity: 0.7 !important;
          cursor: grabbing !important;
          z-index: 1000 !important;
          transform: scale(1.02) !important;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
      }

      /* Drop target indicators - General */
      .component-container.drop-target {
          z-index: 10;
      }

      /* Drop position indicators using CSS transitions for smooth appearance/disappearance */
      .drop-indicator {
          position: absolute;
          pointer-events: none;
          z-index: 100;
          opacity: 0;
          transition: opacity 0.2s ease, transform 0.2s ease, height 0.2s ease;
      }

      /* Before position indicator */
      .drop-indicator-before {
          top: -2px;
          left: 0;
          right: 0;
          height: 0;
          transform: scaleY(0);
      }

      /* After position indicator */
      .drop-indicator-after {
          bottom: -2px;
          left: 0;
          right: 0;
          height: 0;
          transform: scaleY(0);
      }

      /* Inside position indicator for containers */
      .drop-indicator-inside {
          inset: 0;
          border: 2px dashed transparent;
          background-color: transparent;
      }

      /* Active drop position indicators using data attributes */
      [data-drop-before="true"] .drop-indicator-before {
          opacity: 1;
          transform: scaleY(1);
          height: 4px;
          background-color: #3b82f6;
          box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
          border-radius: 2px;
      }

      [data-drop-after="true"] .drop-indicator-after {
          opacity: 1;
          transform: scaleY(1);
          height: 4px;
          background-color: #3b82f6;
          box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
          border-radius: 2px;
      }

      [data-drop-inside="true"] .drop-indicator-inside {
          opacity: 1;
          border: 2px dashed #3b82f6;
          background-color: rgba(59, 130, 246, 0.1);
          box-shadow: inset 0 0 8px rgba(59, 130, 246, 0.2);
      }

      /* Delete button visibility */
      .delete-button {
          position: absolute;
          top: 4px;
          right: 4px;
          width: 20px;
          height: 20px;
          background-color: rgba(30, 30, 30, 0.7);
          color: rgba(255, 255, 255, 0.7);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          cursor: pointer;
          opacity: 0;
          transition: all 0.2s ease;
          z-index: 50;
      }

      .component-container:hover .delete-button {
          opacity: 0.7;
      }

      .component-container.selected-component .delete-button,
      [data-selected="true"] .delete-button {
          opacity: 1 !important;
      }

      .delete-button:hover {
          opacity: 1 !important;
          background-color: #ef4444 !important;
          color: white !important;
      }

      /* Empty container styling */
      .component-container.empty-container {
          min-height: 80px !important;
          border: 2px dashed rgba(100, 100, 100, 0.3) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
      }

      /* Container component styling */
      [data-widget-id][data-edit-mode="true"] [data-component-type="Panel"],
      [data-widget-id][data-edit-mode="true"] [data-component-type="ScrollBox"] {
          min-height: 80px;
          width: 100% !important;
      }

      /* Children containers */
      .panel-children-container,
      .scrollbox-children-container {
          position: relative;
          width: 100%;
          min-height: 40px;
          display: flex;
          flex-direction: column;
          gap: 8px;
          padding: 8px;
          border-radius: 3px;
      }

      /* Nested component indicators */
      .component-container .component-container {
          position: relative;
          margin-left: 8px;
          border-left: 2px solid rgba(100, 165, 115, 0.3);
          padding-left: 8px;
      }

      /* Grab cursor for draggable items in edit mode */
      [data-edit-mode="true"] .component-container {
          cursor: grab;
      }

      /* Nested container drop highlight */
      [data-is-nested-container="true"].drop-highlight {
          background-color: rgba(59, 130, 246, 0.1);
          border: 2px dashed #3b82f6 !important;
          border-radius: 4px;
      }

      /* Component type specific styling */
      .component-type-panel,
      .component-type-scrollbox {
          padding: 2px;
      }

      .component-type-pushbutton,
      .component-type-input,
      .component-type-label,
      .component-type-dropdown {
          position: relative;
          padding: 4px;
          margin: 2px;
          border-radius: 3px;
      }

      /* Animation for drop indicators */
      @keyframes pulse {
          0% { opacity: 0.8; }
          50% { opacity: 1; }
          100% { opacity: 0.8; }
      }

      [data-drop-before="true"] .drop-indicator-before,
      [data-drop-after="true"] .drop-indicator-after,
      [data-drop-inside="true"] .drop-indicator-inside {
          animation: pulse 1.5s infinite;
      }
    `,document.head.appendChild(e),r.current=!0,()=>{const t=document.getElementById(a);t&&(document.head.removeChild(t),r.current=!1)}},[a]),r.current}function Dt(a,r,e=[]){const t=x.useRef(r);x.useEffect(()=>{t.current=r},[r]),x.useEffect(()=>{const n=o=>{t.current(o)},s=j.subscribe(a,n);return()=>{j.unsubscribe(s)}},e)}function St({base:a="",isContainer:r=!1,isSelected:e=!1,isDragging:t=!1,dropPosition:n=null,componentType:s="",isEmpty:o=!1,className:d=""}){return $("component-container",a,r&&"container-component",o&&r&&"empty-container",s&&`component-type-${s.toLowerCase()}`,e&&"selected-component",t&&"dragging-component",n==="before"&&"drop-before",n==="after"&&"drop-after",n==="inside"&&"drop-inside",d)}function qt({isContainer:a=!1,isSelected:r=!1,isDragging:e=!1,dropPosition:t=null,componentType:n="",isEditMode:s=!1,widgetId:o="",componentId:d="",instanceId:c="",parentId:y="",hasChildren:v=!1}){return{"data-component-type":n||void 0,"data-component-id":d||void 0,"data-instance-id":c||void 0,"data-widget-id":o||void 0,"data-parent-id":y||void 0,"data-is-container":a?"true":void 0,"data-has-children":v?"true":void 0,"data-selected":r?"true":void 0,"data-dragging":e?"true":void 0,"data-edit-mode":s?"true":void 0,"data-drop-before":t==="before"?"true":void 0,"data-drop-after":t==="after"?"true":void 0,"data-drop-inside":t==="inside"?"true":void 0}}function Ct({base:a,isContainer:r=!1,isSelected:e=!1,isDragging:t=!1,dropPosition:n=null,componentType:s="",isEmpty:o=!1,className:d="",isEditMode:c=!1,widgetId:y="",componentId:v="",instanceId:l="",parentId:p="",hasChildren:u=!1}){const m=x.useMemo(()=>qt({isContainer:r,isSelected:e,isDragging:t,dropPosition:n,componentType:s,isEditMode:c,widgetId:y,componentId:v,instanceId:l,parentId:p,hasChildren:u}),[r,e,t,n,s,c,y,v,l,p,u]),i=x.useMemo(()=>St({base:a,isContainer:r,isSelected:e,isDragging:t,dropPosition:n,componentType:s,isEmpty:o,className:d}),[a,r,e,t,n,s,o,d]),b=x.useMemo(()=>({visible:e&&c,className:$("delete-button",e&&"opacity-100")}),[e,c]),h=x.useMemo(()=>r?s==="Panel"?"panel-children-container":"scrollbox-children-container":"",[r,s]);return{dataAttributes:m,classNames:i,deleteButton:b,childContainerClass:h,isHoverable:c}}const We=x.memo(function({instance:r,widgetComponent:e,widgetId:t,isContainer:n,isSelected:s,isEditMode:o,onSelect:d,onDelete:c,actionHandler:y,dragDropEnabled:v,parentId:l,renderComponent:p,children:u}){const m=x.useRef(z.getState()),i=ee(),b=x.useRef(r),h=x.useRef(e),w=x.useRef(null),g=x.useRef(v),[T,D]=x.useState(!1);Et(),x.useEffect(()=>{b.current=r,h.current=e,g.current=v},[r,e,v]),x.useEffect(()=>z.subscribe(W=>{m.current=W}),[]);const E=x.useCallback(q=>{q.stopPropagation();const W=h.current.id;W===i.selectedComponentId&&t===i.selectedWidgetId||(i.selectComponent(W,t,{syncWithLayoutPanel:!0,openPropertyPanel:!0}),d&&d(W,q),j.publish("component:selected",{componentId:W,widgetId:t}))},[d,t,i]),S=x.useCallback(q=>{q&&(q.stopPropagation(),q.preventDefault());const W=h.current.id;W===i.selectedComponentId&&i.deselectAll(),It.deleteComponent(t,W),j.publish("component:deleted",{componentId:W,widgetId:t,parentId:l})},[t,l,i]),C=x.useMemo(()=>e.id,[e.id]),k=x.useMemo(()=>({id:C,widgetId:t,componentType:r.type,parentId:l,instanceId:r.id,definitionId:e.definitionId,position:e.position,size:e.size,type:"component"}),[C,t,r.type,r.id,l,e.definitionId,e.position,e.size]),{dragProps:R,isDragging:P,isCrossWidgetDrag:G,elementRef:O}=Tt("component",C,k,{disabled:!g.current,crossWidgetEnabled:!0});x.useEffect(()=>{D(P)},[P]),Dt("component:selected",q=>{q.data.componentId},[C]);const{ref:te,className:Y,...J}=R,Z=x.useCallback(q=>{w.current=q,O&&(O.current=q),q&&(q.setAttribute("data-component-id",e.id),q.setAttribute("data-component-depth",l?"1":"0"),q.setAttribute("data-is-container",n?"true":"false"),q.setAttribute("data-parent-id",l||""),q.setAttribute("data-component-type",r.type))},[e.id,l,n,r.type,O]),{classNames:se,dataAttributes:_}=Ct({base:"component-container relative",isContainer:n,isSelected:s,isDragging:T,componentType:r.type,isEmpty:n&&(!u||x.Children.count(u)===0),className:"",isEditMode:o,widgetId:t,componentId:e.id,instanceId:r.id,parentId:l,hasChildren:!!(u&&x.Children.count(u)>0)});return f.jsxs("div",{ref:Z,className:se,..._,onClick:E,...J,draggable:o&&g.current,children:[p(r,{widgetId:t,actionHandler:y,isEditMode:o,isSelected:s,children:u,onDelete:c}),o&&s&&f.jsx("button",{className:"delete-button absolute top-1 right-1 w-5 h-5 bg-bg-dark bg-opacity-70 hover:bg-red-500 text-white rounded-full flex items-center justify-center z-50",onClick:q=>{q.stopPropagation(),q.preventDefault(),S(q)},type:"button",onMouseDown:q=>q.stopPropagation(),onMouseUp:q=>q.stopPropagation(),onMouseEnter:q=>q.stopPropagation(),onMouseLeave:q=>q.stopPropagation(),title:"Delete component",style:{pointerEvents:"auto",zIndex:1e3},"data-testid":"delete-button",children:"✕"}),!1]})});We.__docgenInfo={description:`Wrapper component that adds drag functionality to any component
The drop handling is now delegated to the WidgetOverlay

@path src/features/builder/components/ComponentWithDragDrop.tsx`,methods:[],displayName:"ComponentWithDragDrop",props:{instance:{required:!0,tsType:{name:"ComponentInstance"},description:"The component instance"},widgetComponent:{required:!0,tsType:{name:"WidgetComponent"},description:"The widget component reference"},widgetId:{required:!0,tsType:{name:"EntityId"},description:"The ID of the widget containing this component"},isContainer:{required:!0,tsType:{name:"boolean"},description:"Whether this component can contain other components"},isSelected:{required:!1,tsType:{name:"boolean"},description:"Whether this component is currently selected"},isEditMode:{required:!1,tsType:{name:"boolean"},description:"Whether edit mode is enabled"},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: EntityId, e?: ReactMouseEvent<Element, MouseEvent>) => void",signature:{arguments:[{type:{name:"EntityId"},name:"id"},{type:{name:"ReactMouseEvent",elements:[{name:"Element"},{name:"MouseEvent"}],raw:"ReactMouseEvent<Element, MouseEvent>"},name:"e"}],return:{name:"void"}}},description:"Callback when the component is selected"},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: EntityId, e?: ReactMouseEvent<Element, MouseEvent>) => void",signature:{arguments:[{type:{name:"EntityId"},name:"id"},{type:{name:"ReactMouseEvent",elements:[{name:"Element"},{name:"MouseEvent"}],raw:"ReactMouseEvent<Element, MouseEvent>"},name:"e"}],return:{name:"void"}}},description:"Callback when the component is deleted"},actionHandler:{required:!1,tsType:{name:"signature",type:"function",raw:"(action: string, targetId?: EntityId) => void",signature:{arguments:[{type:{name:"string"},name:"action"},{type:{name:"EntityId"},name:"targetId"}],return:{name:"void"}}},description:"Handler for component actions"},dragDropEnabled:{required:!1,tsType:{name:"boolean"},description:"Whether drag and drop is enabled for this component"},parentId:{required:!1,tsType:{name:"EntityId"},description:"The ID of the parent component, if any"},renderComponent:{required:!0,tsType:{name:"signature",type:"function",raw:`(
    instance: ComponentInstance,
    props: {
        widgetId: EntityId;
        isEditMode?: boolean;
        isSelected?: boolean;
        children?: ReactNode;
        onDelete?: (
            id: EntityId,
            e?: ReactMouseEvent<Element, MouseEvent>
        ) => void;
        actionHandler?: (action: string, targetId?: EntityId) => void;
    }
) => ReactNode`,signature:{arguments:[{type:{name:"ComponentInstance"},name:"instance"},{type:{name:"signature",type:"object",raw:`{
    widgetId: EntityId;
    isEditMode?: boolean;
    isSelected?: boolean;
    children?: ReactNode;
    onDelete?: (
        id: EntityId,
        e?: ReactMouseEvent<Element, MouseEvent>
    ) => void;
    actionHandler?: (action: string, targetId?: EntityId) => void;
}`,signature:{properties:[{key:"widgetId",value:{name:"EntityId",required:!0}},{key:"isEditMode",value:{name:"boolean",required:!1}},{key:"isSelected",value:{name:"boolean",required:!1}},{key:"children",value:{name:"ReactNode",required:!1}},{key:"onDelete",value:{name:"signature",type:"function",raw:`(
    id: EntityId,
    e?: ReactMouseEvent<Element, MouseEvent>
) => void`,signature:{arguments:[{type:{name:"EntityId"},name:"id"},{type:{name:"ReactMouseEvent",elements:[{name:"Element"},{name:"MouseEvent"}],raw:"ReactMouseEvent<Element, MouseEvent>"},name:"e"}],return:{name:"void"}},required:!1}},{key:"actionHandler",value:{name:"signature",type:"function",raw:"(action: string, targetId?: EntityId) => void",signature:{arguments:[{type:{name:"string"},name:"action"},{type:{name:"EntityId"},name:"targetId"}],return:{name:"void"}},required:!1}}]}},name:"props"}],return:{name:"ReactNode"}}},description:"Function to render the actual component content"},children:{required:!1,tsType:{name:"ReactNode"},description:"Child components"}}};const ze=({instance:a})=>f.jsxs("div",{className:"p-2 border border-accent-dark-neutral rounded",children:[f.jsx("div",{className:"text-xs mb-1 text-font-dark-muted",children:a.type}),f.jsx("div",{children:a.label||"Unknown Component"})]}),kt=xe((a,r)=>({renderers:{},isInitialized:!1,initialize:()=>{r().isInitialized||a({isInitialized:!0})},registerRenderer:(e,t)=>{a(n=>({renderers:{...n.renderers,[e]:t}}))},getRenderer:e=>{const t=r().renderers[e];return t||ze},hasRenderer:e=>!!r().renderers[e],renderComponent:(e,t)=>e?r().getRenderer(e.type)({instance:e,...t}):(console.warn("Attempted to render null/undefined component instance"),f.jsx("div",{className:"text-red-500",children:"Error: Missing component"})),renderComponentHierarchy:(e,t,n,s)=>_e(e,t,n,s||null,r)}));function _e(a,r,e,t,n){const{isEditMode:s=!1,isSelected:o=!1,onSelect:d,onDelete:c,actionHandler:y,dragDropEnabled:v=!0}=e,l=z.getState(),p=re.getState(),u=n?n():kt.getState();try{const m=l.getWidget(r);if(!m)return console.warn("Widget with widgetId not found: ",r),null;let i;try{i=p.getInstance(a)}catch{return console.warn("Component instance with instanceId not found: ",a),null}const b=m.components.find(E=>E.instanceId===a);if(!b)return console.warn("Widget component reference for instanceId not found: ",a),null;const h=b.id,w=t?h===t:o,g=i.type==="Panel"||i.type==="ScrollBox",D=m.components.filter(E=>E.parentId===b.id).map(E=>{try{return _e(E.instanceId,r,{...e,isSelected:!1},t,n)}catch(S){return console.error(`Error rendering child component ${E.id}:`,S),null}}).filter(Boolean);return f.jsx(We,{instance:i,widgetComponent:b,widgetId:r,isContainer:g,isSelected:w,isEditMode:s,onSelect:d,onDelete:c,actionHandler:y,dragDropEnabled:v&&s,parentId:b.parentId,renderComponent:u.renderComponent,children:D.length>0&&g?f.jsx("div",{className:$("relative",g?i.type==="Panel"?"panel-children-container":"scrollbox-children-container":"","flex flex-col gap-2 p-2 min-h-[50px] w-full"),"data-children-container":"true","data-parent-id":b.id,"data-component-type":i.type,children:D}):null},b.id)}catch(m){return console.error(`Error rendering component hierarchy for ${a}:`,m),null}}ze.__docgenInfo={description:"Default renderer for fallback when no specific renderer is found",methods:[],displayName:"defaultRenderer"};export{xt as B,rt as D,lt as L,ut as M,Ve as P,Pe as S,ft as T,st as a,oe as b,Ae as c,ht as d};
