import{j as s}from"./jsx-runtime-t1Y7DJZC.js";import{r as l}from"./index-CFacQ8Bc.js";import{t as Q,v,u as U,C as W}from"./ThemeAwareText-aBl3ngNK.js";import{d as X}from"./dropdown-BgeGm6tg.js";const Y=({value:b=[],onChange:y=()=>{},label:f,accessibleLabel:$,placeholder:g="Select an option",options:V,showCaret:S=!0,multiple:d=!1,variant:L="default",closeOnBlur:j=!0,closeOnMouseLeave:N=!1,closeDelay:k=150,closeOnSelect:R,disabled:w=!1,onOpenChange:t,className:M,styleProps:x,...h})=>{const[a,m]=l.useState(!1),T=l.useRef(null),n=l.useRef(),i=Array.isArray(b)?b:[b].filter(Boolean),u=V.filter(e=>i.includes(e.value)),D=R??!d,B=l.useCallback(()=>{if(!w){const e=!a;m(e),t==null||t(e)}},[w,a,t]),_=l.useCallback(e=>{if(d){const c=i.includes(e.value)?i.filter(o=>o!==e.value):[...i,e.value];y(c)}else y(e.value);D&&(m(!1),t==null||t(!1))},[d,i,y,D,t]);l.useEffect(()=>{if(!j)return;const e=c=>{T.current&&!T.current.contains(c.target)&&(m(!1),t==null||t(!1))};return a&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a,j,t]),l.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]);const z=l.useCallback(()=>{N&&a&&(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{m(!1),t==null||t(!1)},k))},[N,k,a,t]),F=l.useCallback(()=>{n.current&&clearTimeout(n.current)},[]),G=({elementProps:e,state:c,computedStyle:o})=>{const p=`dropdown-${(e==null?void 0:e["data-component-id"])||"root"}`,I=`${p}-label`,A=`${p}-list`,E=$||(typeof f=="string"?f:g),H={role:"combobox","aria-expanded":a,"aria-haspopup":"listbox","aria-label":E,"aria-controls":a?A:void 0,"aria-activedescendant":i.length?`${p}-option-${i[0]}`:void 0,"aria-multiselectable":d},J=()=>f||(u.length===0?g:u.length===1?u[0].label:`${u.length} items selected`);return s.jsxs("div",{...e,ref:T,className:o.root,"aria-labelledby":I,onMouseLeave:z,onMouseEnter:F,children:[s.jsxs("button",{type:"button",onClick:B,disabled:c.isDisabled,className:o.trigger,id:I,...H,children:[s.jsx("span",{className:v(!u.length&&"text-font-dark-dimmed"),children:J()}),S&&s.jsx(U,{className:v("transition-transform duration-200",a&&"rotate-180"),"aria-hidden":"true"})]}),a&&s.jsx("div",{className:o.content,role:"listbox",id:A,"aria-label":`${E} options`,children:V.map(r=>{const q=i.includes(r.value),K={id:`${p}-option-${r.value}`,...q?{"aria-selected":!0}:{}};return s.jsxs("div",{onClick:()=>!r.disabled&&_(r),className:v(o.item,q&&"bg-accent-dark-neutral",r.disabled&&"opacity-50 cursor-not-allowed"),role:"option",...K,children:[d&&s.jsx(W,{className:v("mr-2",!q&&"invisible"),"aria-hidden":"true"}),r.icon&&s.jsx("span",{className:"flex-shrink-0 mr-2","aria-hidden":"true",children:r.icon}),s.jsx("span",{className:"flex-grow text-left",children:r.label})]},r.value)})})]})};return s.jsx(Q,{as:"div",stylePreset:X,styleProps:{variant:L,elements:{root:{base:M},...x==null?void 0:x.elements}},state:{isDisabled:w,isActive:a},renderElement:G,...h})};Y.__docgenInfo={description:"",methods:[],displayName:"DropdownSelect",props:{value:{required:!1,tsType:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"",defaultValue:{value:"[]",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | string[]) => void",signature:{arguments:[{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},label:{required:!1,tsType:{name:"ReactNode"},description:""},accessibleLabel:{required:!1,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select an option"',computed:!1}},options:{required:!0,tsType:{name:"Array",elements:[{name:"DropdownOption"}],raw:"DropdownOption[]"},description:""},showCaret:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"DropdownVariant"},description:"",defaultValue:{value:'"default"',computed:!1}},closeOnBlur:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},closeOnMouseLeave:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},closeDelay:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"150",computed:!1}},closeOnSelect:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};export{Y as D};
